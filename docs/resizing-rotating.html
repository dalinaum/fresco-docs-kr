<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta charset='utf-8'>
    <title>Fresco | Resizing and Rotating</title>
    <link rel='stylesheet' href='/static/site.css' type='text/css'/>
    <link rel="stylesheet" href='/static/pygments.css' type='text/css'/>
    <link rel='shortcut icon' href='/static/favicon.png'>
    <meta name='viewport' content='width=480'>
    <meta property="og:title" content="Resizing and Rotating" />
    <meta property="og:site_name" content="fresco">
    <meta property='og:description' content='Fresco is an image management library.'>
    <meta property='og:image' content='http://facebook.github.io/fresco/static/fresco-og-image.png'>
    <meta property='og:url' content="http://facebook.github.io/fresco/docs/resizing-rotating.html">
    
    <meta property='og:type' content='website'>
    
    <script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script>
    <script type="text/javascript">{'try{Typekit.load();}catch(e){}'}</script>
    <!-- Google Analytics -->
</head>
<body>

<header class='topbar'><nav class='width'>
<a href='/'>
  <img src="/static/fresco-logo.png" class="logo">
</a>
    <ul>
      <li><a href="/docs/index.html#_"
          
          class="active" >
          Docs
      </a></li>
      <li><a href="/"
          >
          About
      </a></li>
      <li><a href="/support.html"
          >
          Support
      </a></li>
      <li><a href="/javadoc">
          API
      </a></li>
      <li><a href="http://github.com/facebook/fresco">GitHub</a></li>
      <li><a href="http://fresco-cn.org">中文版</a></li>
    </ul>
</nav></header>


<section class='content'><div class='width'>

<nav class='toc'>
  
    <section>
      <h3>Quick Start</h3>
      <ul>
        
          <li>
            <a href="/docs/index.html#_">
              Adding Fresco to your Project
            </a>
            
          </li>
        
          <li>
            <a href="/docs/getting-started.html#_">
              Getting started with Fresco
            </a>
            
          </li>
        
          <li>
            <a href="/docs/concepts.html#_">
              Concepts
            </a>
            
          </li>
        
          <li>
            <a href="/docs/supported-uris.html#_">
              Supported URIs
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Drawee Guide</h3>
      <ul>
        
          <li>
            <a href="/docs/using-drawees-xml.html#_">
              Using Drawees in XML
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-drawees-code.html#_">
              Using Drawees in Code
            </a>
            
          </li>
        
          <li>
            <a href="/docs/drawee-components.html#_">
              Drawee Components
            </a>
            
          </li>
        
          <li>
            <a href="/docs/progress-bars.html#_">
              Progress Bars
            </a>
            
          </li>
        
          <li>
            <a href="/docs/scaling.html#_">
              Scaling
            </a>
            
          </li>
        
          <li>
            <a href="/docs/rounded-corners-and-circles.html#_">
              Rounded Corners and Circles
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-controllerbuilder.html#_">
              Using the ControllerBuilder
            </a>
            
          </li>
        
          <li>
            <a href="/docs/progressive-jpegs.html#_">
              Progressive JPEGs
            </a>
            
          </li>
        
          <li>
            <a href="/docs/animations.html#_">
              Animated Images
            </a>
            
          </li>
        
          <li>
            <a href="/docs/requesting-multiple-images.html#_">
              Requesting Multiple Images
            </a>
            
          </li>
        
          <li>
            <a href="/docs/listening-download-events.html#_">
              Listening to Download Events
            </a>
            
          </li>
        
          <li>
            <a href="/docs/resizing-rotating.html#_" class="active">
              Resizing and Rotating
            </a>
            
          </li>
        
          <li>
            <a href="/docs/modifying-image.html#_">
              Modifying the Image
            </a>
            
          </li>
        
          <li>
            <a href="/docs/image-requests.html#_">
              Image Requests
            </a>
            
          </li>
        
          <li>
            <a href="/docs/writing-custom-views.html#_">
              Writing Custom Views
            </a>
            
          </li>
        
          <li>
            <a href="/docs/gotchas.html#_">
              Gotchas
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Image Pipeline Guide</h3>
      <ul>
        
          <li>
            <a href="/docs/intro-image-pipeline.html#_">
              Introduction to the Image Pipeline
            </a>
            
          </li>
        
          <li>
            <a href="/docs/configure-image-pipeline.html#_">
              Configuring the Image Pipeline
            </a>
            
          </li>
        
          <li>
            <a href="/docs/caching.html#_">
              Cache Behavior
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-image-pipeline.html#_">
              Using the Image Pipeline Directly
            </a>
            
          </li>
        
          <li>
            <a href="/docs/datasources-datasubscribers.html#_">
              DataSources and DataSubscribers
            </a>
            
          </li>
        
          <li>
            <a href="/docs/closeable-references.html#_">
              Closeable References
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Third Party Libraries</h3>
      <ul>
        
          <li>
            <a href="/docs/using-other-network-layers.html#_">
              Using Other Network Layers
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-other-image-loaders.html#_">
              Using Other Image Loaders
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Contributing to Fresco</h3>
      <ul>
        
          <li>
            <a href="/docs/building-from-source.html#_">
              Building from Source
            </a>
            
          </li>
        
      </ul>
    </section>
  
</nav>


<article class='withtoc'>
    <h1>
      Resizing and Rotating
      <a class="edit-page-link" href="https://github.com/facebook/fresco/tree/gh-pages/docs/01-resizing-rotating.md" target="_blank">Edit on GitHub</a>
    </h1>
    <p></p>

    <p>These features require you to <a href="using-controllerbuilder.html#ImageRequest">construct an image request</a> directly.</p>

<h2>Resizing Images</h2>

<h3>Terminology: resizing vs scaling</h3>

<ul>
<li><strong>Resizing</strong> is a pipeline operation executed in software. It returns a completely new bitmap, of a different size.</li>
<li><strong>Scaling</strong> is a canvas operation and is usually hardware accelerated. The bitmap itself is always the same size. It just gets drawn upscaled or downscaled.</li>
</ul>

<h3>Should you resize or scale?</h3>

<p>Resizing is rarely necessary. Scaling is almost always preferred, even with resizing.</p>

<p>There are several limitations with resizing:</p>

<ul>
<li>Resize is restricted so that it never returns a bigger image. It can only make the image smaller.</li>
<li>At the moment, only JPEG images can be resized.</li>
<li>There is only a rough control over the resulting image dimensions. Image cannot be resized to the exact size, but will be reduced by one of the supported resize factors. That means that even resized images need to be scaled before displaying.</li>
<li>Only the following resize factors are supported: <code>N/8</code> with <code>1 &lt;= N &lt;= 8</code>.</li>
<li>Resize is performed in software, which is much slower than hardware-accelerated scaling.</li>
</ul>

<p>Scaling, on the other hand, doesn&#39;t suffer any of these limitations. Scaling uses Android&#39;s own built-in facilities to match the image to the view size. On Android 4.0 and later, this is hardware-accelerated on devices with a GPU. Most of the time, it is the fastest and most effective way to display the image in the size you want. The only downside is if the image is much bigger than the view, then the memory gets wasted.</p>

<p>Why should you ever use resizing then? It&#39;s a trade-off. You should only ever use resize if you need to display an image that is much bigger than the view in order to save memory. One valid example is when you want to display an 8MP photo taken by the camera in a 1280x720 (roughly 1MP) view. An 8MP image would occupy 32MB of memory when decoded to 4 bytes-per-pixel ARGB bitmap. If resized to the view dimensions, it would occupy less than 4 MB.</p>

<p>When it comes to network images, before thinking about resizing, try requesting the image of the proper size first. Don&#39;t request an 8MP high-resolution photo from a server if it can return a smaller version. Your users pay for their data plans and you should be considerate of that. Besides, fetching a smaller image saves internal storage and CPU time in your app.</p>

<p>Only if the server doesn&#39;t provide an alternate URI with the smaller image, or if you are using local photos, should you resort to resizing. In all other cases, including upscaling the image, scaling should be used. To scale, simply specify the <code>layout_width</code> and <code>layout_height</code> of your <code>SimpleDraweeView</code>, as you would for any Android view. Then specify a <a href="scaling.html">scale type</a>.</p>

<h3>Resizing</h3>

<p>Resizing does not modify the original file. Resizing just resizes an encoded image in memory, prior to being decoded.</p>

<p>This can carry out a much greater range of resizing than is possible with Android&#39;s facilities. Images taken with the device&#39;s camera, in particular, are often much too large to scale and need to be resized before display on the device.</p>

<p>We currently only support resizing for images in the JPEG format, but this is the most widely used image format anyway and most Android devices with cameras store files in the JPEG format.</p>

<p>To resize pass a <a href="../javadoc/reference/com/facebook/imagepipeline/common/ResizeOptions.html">ResizeOptions</a> object when constructing an <code>ImageRequest</code>:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Uri</span> <span class="n">uri</span> <span class="o">=</span> <span class="s">&quot;file:///mnt/sdcard/MyApp/myfile.jpg&quot;</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">50</span><span class="o">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>
<span class="n">ImageRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="n">ImageRequestBuilder</span><span class="o">.</span><span class="na">newBuilderWithSource</span><span class="o">(</span><span class="n">uri</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setResizeOptions</span><span class="o">(</span><span class="k">new</span> <span class="nf">ResizeOptions</span><span class="o">(</span><span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">))</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">PipelineDraweeController</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">Fresco</span><span class="o">.</span><span class="na">newDraweeControllerBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setOldController</span><span class="o">(</span><span class="n">mDraweeView</span><span class="o">.</span><span class="na">getController</span><span class="o">())</span>
    <span class="o">.</span><span class="na">setImageRequest</span><span class="o">(</span><span class="n">request</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">mSimpleDraweeView</span><span class="o">.</span><span class="na">setController</span><span class="o">(</span><span class="n">controller</span><span class="o">);</span>
</code></pre></div>
<h2><a name="rotate"></a>Auto-rotation</h2>

<p>It&#39;s very annoying to users to see their images show up sideways! Many devices store the orientation of the image in metadata in the JPEG file. If you want images to be automatically rotated to match the device&#39;s orientation, you can say so in the image request:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">ImageRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="n">ImageRequestBuilder</span><span class="o">.</span><span class="na">newBuilderWithSource</span><span class="o">(</span><span class="n">uri</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setAutoRotateEnabled</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="c1">// as above</span>
</code></pre></div>

    <div class="docs-prevnext">
      
        <a href="/docs/listening-download-events.html#_">&larr; Prev</a>
      
      
        <a class="right" href="/docs/modifying-image.html#_">Next &rarr;</a>
      
    </div>

    <a id="_"></a>
</article>

</div></section>
<footer><div class='width'>
    &copy; Copyright 2015, Facebook Inc.<br>
    Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. Sample code licensed under the <a href="/sample-license.html">sample license</a>.
</div></footer>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
  ga('create', 'UA-44373548-3', 'auto');
  ga('send', 'pageview');
 
</script>
<script src="/static/linkify.js"></script>
</body>
</html>

