<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta charset='utf-8'>
    <title>Fresco | Configuring the Image Pipeline</title>
    <link rel='stylesheet' href='/static/site.css' type='text/css'/>
    <link rel="stylesheet" href='/static/pygments.css' type='text/css'/>
    <link rel='shortcut icon' href='/static/favicon.png'>
    <meta name='viewport' content='width=480'>
    <meta property="og:title" content="Configuring the Image Pipeline" />
    <meta property="og:site_name" content="fresco">
    <meta property='og:description' content='Fresco is an image management library.'>
    <meta property='og:image' content='http://facebook.github.io/fresco/static/fresco-og-image.png'>
    <meta property='og:url' content="http://facebook.github.io/fresco/docs/configure-image-pipeline.html">
    
    <meta property='og:type' content='website'>
    
    <script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script>
    <script type="text/javascript">{'try{Typekit.load();}catch(e){}'}</script>
    <!-- Google Analytics -->
</head>
<body>

<header class='topbar'><nav class='width'>
<a href='/'>
  <img src="/static/fresco-logo.png" class="logo">
</a>
    <ul>
      <li><a href="/docs/index.html#_"
          
          class="active" >
          Docs
      </a></li>
      <li><a href="/"
          >
          About
      </a></li>
      <li><a href="/support.html"
          >
          Support
      </a></li>
      <li><a href="/javadoc">
          API
      </a></li>
      <li><a href="http://github.com/facebook/fresco">GitHub</a></li>
      <li><a href="http://fresco-cn.org">中文版</a></li>
      <li><a href="http://fresco.recrack.com">한국어</a></li>
    </ul>
</nav></header>


<section class='content'><div class='width'>

<nav class='toc'>
  
    <section>
      <h3>Quick Start</h3>
      <ul>
        
          <li>
            <a href="/docs/index.html#_">
              Adding Fresco to your Project
            </a>
            
          </li>
        
          <li>
            <a href="/docs/getting-started.html#_">
              Getting started with Fresco
            </a>
            
          </li>
        
          <li>
            <a href="/docs/concepts.html#_">
              Concepts
            </a>
            
          </li>
        
          <li>
            <a href="/docs/supported-uris.html#_">
              Supported URIs
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Drawee Guide</h3>
      <ul>
        
          <li>
            <a href="/docs/using-drawees-xml.html#_">
              Using Drawees in XML
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-drawees-code.html#_">
              Using Drawees in Code
            </a>
            
          </li>
        
          <li>
            <a href="/docs/drawee-components.html#_">
              Drawee Components
            </a>
            
          </li>
        
          <li>
            <a href="/docs/progress-bars.html#_">
              Progress Bars
            </a>
            
          </li>
        
          <li>
            <a href="/docs/scaling.html#_">
              Scaling
            </a>
            
          </li>
        
          <li>
            <a href="/docs/rounded-corners-and-circles.html#_">
              Rounded Corners and Circles
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-controllerbuilder.html#_">
              Using the ControllerBuilder
            </a>
            
          </li>
        
          <li>
            <a href="/docs/progressive-jpegs.html#_">
              Progressive JPEGs
            </a>
            
          </li>
        
          <li>
            <a href="/docs/animations.html#_">
              Animated Images
            </a>
            
          </li>
        
          <li>
            <a href="/docs/requesting-multiple-images.html#_">
              Requesting Multiple Images
            </a>
            
          </li>
        
          <li>
            <a href="/docs/listening-download-events.html#_">
              Listening to Download Events
            </a>
            
          </li>
        
          <li>
            <a href="/docs/resizing-rotating.html#_">
              Resizing and Rotating
            </a>
            
          </li>
        
          <li>
            <a href="/docs/modifying-image.html#_">
              Modifying the Image
            </a>
            
          </li>
        
          <li>
            <a href="/docs/image-requests.html#_">
              Image Requests
            </a>
            
          </li>
        
          <li>
            <a href="/docs/writing-custom-views.html#_">
              Writing Custom Views
            </a>
            
          </li>
        
          <li>
            <a href="/docs/gotchas.html#_">
              Gotchas
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Image Pipeline Guide</h3>
      <ul>
        
          <li>
            <a href="/docs/intro-image-pipeline.html#_">
              Introduction to the Image Pipeline
            </a>
            
          </li>
        
          <li>
            <a href="/docs/configure-image-pipeline.html#_" class="active">
              Configuring the Image Pipeline
            </a>
            
          </li>
        
          <li>
            <a href="/docs/caching.html#_">
              Cache Behavior
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-image-pipeline.html#_">
              Using the Image Pipeline Directly
            </a>
            
          </li>
        
          <li>
            <a href="/docs/datasources-datasubscribers.html#_">
              DataSources and DataSubscribers
            </a>
            
          </li>
        
          <li>
            <a href="/docs/closeable-references.html#_">
              Closeable References
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Third Party Libraries</h3>
      <ul>
        
          <li>
            <a href="/docs/using-other-network-layers.html#_">
              Using Other Network Layers
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-other-image-loaders.html#_">
              Using Other Image Loaders
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Contributing to Fresco</h3>
      <ul>
        
          <li>
            <a href="/docs/building-from-source.html#_">
              Building from Source
            </a>
            
          </li>
        
      </ul>
    </section>
  
</nav>


<article class='withtoc'>
    <h1>
      Configuring the Image Pipeline
      <a class="edit-page-link" href="https://github.com/facebook/fresco/tree/gh-pages/docs/02-configure-image-pipeline.md" target="_blank">Edit on GitHub</a>
    </h1>
    <p></p>

    <p>Most apps can initialize Fresco completely by the simple command:
대부분의 앱은 프레스코를 간단한 명령으로 초기화 할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Fresco</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
</code></pre></div>
<p>For those apps that need more advanced customization, we offer it using the <a href="../javadoc/reference/com/facebook/imagepipeline/core/ImagePipelineConfig.html">ImagePipelineConfig</a> class.
더 향상된 커스텀을 필요로 하는 앱들은 <a href="../javadoc/reference/com/facebook/imagepipeline/core/ImagePipelineConfig.html">ImagePipelineConfig</a>클래스를 사용할 수 있습니다.</p>

<p>Here is a maximal example. Rare is the app that actually needs all of these settings, but here they are for reference.
여기에 최고의 예제가 있습니다. 극소수의 앱만 이러한 설정이 필요하겠지만 그들을 위해 레퍼런스를 만들었습니다.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">ImagePipelineConfig</span> <span class="n">config</span> <span class="o">=</span> <span class="n">ImagePipelineConfig</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setBitmapMemoryCacheParamsSupplier</span><span class="o">(</span><span class="n">bitmapCacheParamsSupplier</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setCacheKeyFactory</span><span class="o">(</span><span class="n">cacheKeyFactory</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setEncodedMemoryCacheParamsSupplier</span><span class="o">(</span><span class="n">encodedCacheParamsSupplier</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setExecutorSupplier</span><span class="o">(</span><span class="n">executorSupplier</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setImageCacheStatsTracker</span><span class="o">(</span><span class="n">imageCacheStatsTracker</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setMainDiskCacheConfig</span><span class="o">(</span><span class="n">mainDiskCacheConfig</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setMemoryTrimmableRegistry</span><span class="o">(</span><span class="n">memoryTrimmableRegistry</span><span class="o">)</span> 
    <span class="o">.</span><span class="na">setNetworkFetchProducer</span><span class="o">(</span><span class="n">networkFetchProducer</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPoolFactory</span><span class="o">(</span><span class="n">poolFactory</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setProgressiveJpegConfig</span><span class="o">(</span><span class="n">progressiveJpegConfig</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setRequestListeners</span><span class="o">(</span><span class="n">requestListeners</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setSmallImageDiskCacheConfig</span><span class="o">(</span><span class="n">smallImageDiskCacheConfig</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">Fresco</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">config</span><span class="o">);</span>
</code></pre></div>
<p>Be sure to pass your <code>ImagePipelineConfig</code> object to <code>Fresco.initialize!</code> Otherwise, Fresco will use a default configuration instead of the one you built.
<code>ImagePipelineConfig</code> 객체를 <code>Fresco.initialize</code>에 꼭 전달하세요. 그렇지 않으면 프레스코는 당신이 만든 것 대신 기본 설정을 사용할겁니다.</p>

<h3>공급자(Supplier) 이해하기</h3>

<p>몇몇 설정 빌더 메소드는 자기 자체 인스턴스보다 <a href="../javadoc/reference/com/facebook/common/internal/Supplier.html">Supplier</a> 인스턴스를 사용합니다.</p>

<p>이는 만들기 좀 복잡해 보이지만, 당신의 앱이 실행 중 일때 동작방식을 바꿀 수 있도록 합니다. 메모리캐시는 Supplier를 5분 마다 체크합니다.</p>

<p>파라미터를 직접 바꿀 필요가 없다면 매 시간마다 같은 객체를 돌려주는 Supplier를 사용하세요</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">X</span><span class="o">&gt;</span> <span class="n">xSupplier</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Supplier</span><span class="o">&lt;</span><span class="n">X</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">X</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">X</span><span class="o">(</span><span class="n">xparam1</span><span class="o">,</span> <span class="n">xparam2</span><span class="o">...);</span>
  <span class="o">}</span>
<span class="o">);</span>
<span class="c1">//이미지 파이프라인이 만들어질 때</span>
<span class="o">.</span><span class="na">setXSupplier</span><span class="o">(</span><span class="n">xSupplier</span><span class="o">);</span>
</code></pre></div>
<h3>쓰레드 풀</h3>

<p>By default, the image pipeline uses three thread pools:
기본적으로 이미지 파이프라인은 3가지 쓰레드 풀을 사용합니다:</p>

<ol>
<li>네트워크 파일을 내려받을 3개의 쓰레드</li>
<li>모든 디스크 동작을 위한 두개의 쓰레드 - 로컬파일 읽기, 디스크캐시</li>
<li>CPU기반 작업- 디코드, 모양 변환, 백그라운드 작업, 후처리 작업등 -을 위한 두개의 쓰레드</li>
</ol>

<p><a href="using-other-network-layers.html">네트워크 레이어 설정</a>으로 네트워크 동작을 커스텀할 수 있습니다.</p>

<p>To change the behavior for all other operations, pass in an instance of <a href="../javadoc/reference/com/facebook/imagepipeline/core/ExecutorSupplier.html">ExecutorSupplier</a>.
다른 동작을 바꾸려면 <a href="../javadoc/reference/com/facebook/imagepipeline/core/ExecutorSupplier.html">ExecutorSupplier</a>인스턴스를 전달 하세요.</p>

<h3>메모리캐시 설정하기</h3>

<p>The bitmap cache and the encoded memory cache are configured by a Supplier of a <a href="../javadoc/reference/com/facebook/imagepipeline/cache/MemoryCacheParams.html#MemoryCacheParams(int,%20int,%20int,%20int,%20int)">MemoryCacheParams</a> object.
비트맵 캐시와 인코드된 메모리 캐시는 <a href="../javadoc/reference/com/facebook/imagepipeline/cache/MemoryCacheParams.html#MemoryCacheParams(int,%20int,%20int,%20int,%20int)">MemoryCacheParams</a> 객체의 공급자(Supplier)로 설정될 수 있습니다.</p>

<h3>디스크 캐시 설정하기</h3>

<p><a href="../javadoc/reference/com/facebook/cache/disk/DiskCacheConfig.Builder.html">DiskCacheConfig</a> 객체를 만들기 위해 빌더패턴을 사용할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">DiskCacheConfig</span> <span class="n">diskCacheConfig</span> <span class="o">=</span> <span class="n">DiskCacheConfig</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
   <span class="o">.</span><span class="na">set</span><span class="o">....</span>
   <span class="o">.</span><span class="na">set</span><span class="o">....</span>
   <span class="o">.</span><span class="na">build</span><span class="o">()</span>

<span class="c1">//ImagePipelineConfig 만들 때</span>
<span class="o">.</span><span class="na">setMainDiskCacheConfig</span><span class="o">(</span><span class="n">diskCacheConfig</span><span class="o">)</span>
</code></pre></div>
<h3>캐시 상태 유지하기</h3>

<p>If you want to keep track of metrics like the cache hit rate, you can implement the <a href="../javadoc/reference/com/facebook/imagepipeline/cache/ImageCacheStatsTracker.html">ImageCacheStatsTracker</a> class. This provides callbacks for every cache event that you can use to keep your own statistics.
캐시 히트율을 계속 추적하고 싶다면 <a href="../javadoc/reference/com/facebook/imagepipeline/cache/ImageCacheStatsTracker.html">ImageCacheStatsTracker</a> 를 이용하세요. 이것은 모든 캐시 이벤트의 콜백을 제공하고 당신은 통계를 내는데 사용할 수 있습니다.</p>


    <div class="docs-prevnext">
      
        <a href="/docs/intro-image-pipeline.html#_">&larr; Prev</a>
      
      
        <a class="right" href="/docs/caching.html#_">Next &rarr;</a>
      
    </div>

    <a id="_"></a>
</article>

</div></section>
<footer><div class='width'>
    &copy; Copyright 2015, Facebook Inc.<br>
    Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. Sample code licensed under the <a href="/sample-license.html">sample license</a>.
</div></footer>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
  ga('create', 'UA-44373548-3', 'auto');
  ga('send', 'pageview');
 
</script>
<script src="/static/linkify.js"></script>
</body>
</html>

