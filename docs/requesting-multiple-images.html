<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta charset='utf-8'>
    <title>Fresco | Multi-URI로 여러 이미지 요청하기</title>
    <link rel='stylesheet' href='/static/site.css' type='text/css'/>
    <link rel="stylesheet" href='/static/pygments.css' type='text/css'/>
    <link rel='shortcut icon' href='/static/favicon.png'>
    <meta name='viewport' content='width=480'>
    <meta property="og:title" content="Multi-URI로 여러 이미지 요청하기" />
    <meta property="og:site_name" content="fresco">
    <meta property='og:description' content='Fresco is an image management library.'>
    <meta property='og:image' content='http://facebook.github.io/fresco/static/fresco-og-image.png'>
    <meta property='og:url' content="http://facebook.github.io/fresco/docs/requesting-multiple-images.html">
    
    <meta property='og:type' content='website'>
    
    <script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script>
    <script type="text/javascript">{'try{Typekit.load();}catch(e){}'}</script>
    <!-- Google Analytics -->
</head>
<body>

<header class='topbar'><nav class='width'>
<a href='/'>
  <img src="/static/fresco-logo.png" class="logo">
</a>
    <ul>
      <li><a href="/docs/index.html#_"
          
          class="active" >
          Docs
      </a></li>
      <li><a href="/"
          >
          About
      </a></li>
      <li><a href="/support.html"
          >
          Support
      </a></li>
      <li><a href="/javadoc">
          API
      </a></li>
      <li><a href="http://github.com/facebook/fresco">GitHub</a></li>
      <li><a href="http://fresco-cn.org">中文版</a></li>
      <li><a href="http://fresco.recrack.com">한국어</a></li>
    </ul>
</nav></header>


<section class='content'><div class='width'>

<nav class='toc'>
  
    <section>
      <h3>빠른 시작</h3>
      <ul>
        
          <li>
            <a href="/docs/index.html#_">
              프로젝트에 프레스코 추가하기
            </a>
            
          </li>
        
          <li>
            <a href="/docs/getting-started.html#_">
              프레스코 시작하기
            </a>
            
          </li>
        
          <li>
            <a href="/docs/concepts.html#_">
              컨셉
            </a>
            
          </li>
        
          <li>
            <a href="/docs/supported-uris.html#_">
              지원하는 URI
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Drawee 가이드</h3>
      <ul>
        
          <li>
            <a href="/docs/using-drawees-xml.html#_">
              XML의 Drawee 사용하기
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-drawees-code.html#_">
              코드에서 Drawee 사용하기
            </a>
            
          </li>
        
          <li>
            <a href="/docs/drawee-components.html#_">
              Drawee 컴퍼넌트
            </a>
            
          </li>
        
          <li>
            <a href="/docs/progress-bars.html#_">
              프로그레스바
            </a>
            
          </li>
        
          <li>
            <a href="/docs/scaling.html#_">
              스케일링
            </a>
            
          </li>
        
          <li>
            <a href="/docs/rounded-corners-and-circles.html#_">
              가장자리 둥글게 혹은 원으로 처리하기
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-controllerbuilder.html#_">
              ControllerBuilder 사용하기
            </a>
            
          </li>
        
          <li>
            <a href="/docs/progressive-jpegs.html#_">
              진보된 JPEGs
            </a>
            
          </li>
        
          <li>
            <a href="/docs/animations.html#_">
              움직이는 이미지
            </a>
            
          </li>
        
          <li>
            <a href="/docs/requesting-multiple-images.html#_" class="active">
              이미지 여러개 요청하
            </a>
            
          </li>
        
          <li>
            <a href="/docs/listening-download-events.html#_">
              다운로드 이벤트 리스닝
            </a>
            
          </li>
        
          <li>
            <a href="/docs/resizing-rotating.html#_">
              리사이징과 회전
            </a>
            
          </li>
        
          <li>
            <a href="/docs/modifying-image.html#_">
              이미지 수정하
            </a>
            
          </li>
        
          <li>
            <a href="/docs/image-requests.html#_">
              이미지 리퀘스트
            </a>
            
          </li>
        
          <li>
            <a href="/docs/writing-custom-views.html#_">
              커스텀 뷰 사용하
            </a>
            
          </li>
        
          <li>
            <a href="/docs/gotchas.html#_">
              갓챠
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>이미지 파이프라인 가이드</h3>
      <ul>
        
          <li>
            <a href="/docs/intro-image-pipeline.html#_">
              이미지 파이프라인 소
            </a>
            
          </li>
        
          <li>
            <a href="/docs/configure-image-pipeline.html#_">
              이미지 파이프라인 구성하기
            </a>
            
          </li>
        
          <li>
            <a href="/docs/caching.html#_">
              캐시 동작
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-image-pipeline.html#_">
              이미지 파이프라인 직접 사용하기
            </a>
            
          </li>
        
          <li>
            <a href="/docs/datasources-datasubscribers.html#_">
              데이터소스와 데이터 구독자
            </a>
            
          </li>
        
          <li>
            <a href="/docs/closeable-references.html#_">
              닫을 수 있는 참조
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>서드 파티 라이브러리</h3>
      <ul>
        
          <li>
            <a href="/docs/using-other-network-layers.html#_">
              다른 네트워크 레이어 사용하기
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-other-image-loaders.html#_">
              다른 이미지 로더 사용하기하기
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>앱 발행하기</h3>
      <ul>
        
          <li>
            <a href="/docs/proguard.html#_">
              프로가드 사용하기
            </a>
            
          </li>
        
          <li>
            <a href="/docs/multiple-apks.html#_">
              여러개의 APK이용하기
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>컨트리뷰터 가이드</h3>
      <ul>
        
          <li>
            <a href="/docs/building-from-source.html#_">
              소스 빌드하기
            </a>
            
          </li>
        
      </ul>
    </section>
  
</nav>


<article class='withtoc'>
    <h1>
      Multi-URI로 여러 이미지 요청하기
      <a class="edit-page-link" href="https://github.com/facebook/fresco/tree/gh-pages/docs/01-requesting-multiple-images.md" target="_blank">Edit on GitHub</a>
    </h1>
    <p></p>

    <p>이 메소드는 <a href="using-controllerbuilder.html">이미지 리퀘스트 설정하기</a> 페이지를 필요로 합니다.</p>

<h3>낮은 해상도에서 높은 해상도로</h3>

<p>높은 해상도의 이미지를 보여주는 것은 느립니다. 대기이미지를 잠시 보여주게 해놓고 작은 썸네일을 빨리 다운받아야 합니다.</p>

<p>2가지 URI를 설정할 수 있습니다. 하나는 작은 해상도 이미지고 다른 하나는 높은 해상도용 입니다.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Uri</span> <span class="n">lowResUri</span><span class="o">,</span> <span class="n">highResUri</span><span class="o">;</span>
<span class="n">DraweeController</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">Fresco</span><span class="o">.</span><span class="na">newDraweeControllerBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setLowResImageRequest</span><span class="o">(</span><span class="n">ImageRequest</span><span class="o">.</span><span class="na">fromUri</span><span class="o">(</span><span class="n">lowResUri</span><span class="o">))</span>
    <span class="o">.</span><span class="na">setImageRequest</span><span class="o">(</span><span class="n">ImageRequest</span><span class="o">.</span><span class="na">fromUri</span><span class="o">(</span><span class="n">highResUri</span><span class="o">))</span>
    <span class="o">.</span><span class="na">setOldController</span><span class="o">(</span><span class="n">mSimpleDraweeView</span><span class="o">.</span><span class="na">getController</span><span class="o">())</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">mSimpleDraweeView</span><span class="o">.</span><span class="na">setController</span><span class="o">(</span><span class="n">controller</span><span class="o">);</span>
</code></pre></div>
<h3>썸네일 미리보기 사용하기</h3>

<p><em>이 옵션은 로컬 URI만 지원하고 JPEG 형식용입니다.</em></p>

<p>JPEG가 썸네일이 저장된 EXIF 메타데이터를 갖고 있다면, 이 이미지 파이프라인은 중급의 결과를 돌려줍니다. 당신의 Drawee는 처음에 썸네일을 미리 보여주고, 불러오기와 디코딩이 완료되면 전체 이미지를 보여줍니다.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Uri</span> <span class="n">uri</span><span class="o">;</span>
<span class="n">ImageRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="n">ImageRequestBuilder</span><span class="o">.</span><span class="na">newBuilderWithSource</span><span class="o">(</span><span class="n">uri</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setLocalThumbnailPreviewsEnabled</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>

<span class="n">DraweeController</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">Fresco</span><span class="o">.</span><span class="na">newDraweeControllerBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setImageRequest</span><span class="o">(</span><span class="n">request</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setOldController</span><span class="o">(</span><span class="n">mSimpleDraweeView</span><span class="o">.</span><span class="na">getController</span><span class="o">())</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">mSimpleDraweeView</span><span class="o">.</span><span class="na">setController</span><span class="o">(</span><span class="n">controller</span><span class="o">);</span>
</code></pre></div>
<h3>사용가능한 이미지 먼저 불러오기</h3>

<p>대부분 이미지는 URI를 하나 가집니다. URI를 불러오고 작업을 완료합니다.</p>

<p>같은 이미지에 여러개의 URI를 가지고 있다고 가정해보죠. 카메라로 찍은 이미지로 예를 들어봅시다. 원본 이미지는 업로드하기엔 너무 큽니다. 그래서 이미지는 다운스케일이 먼저 필요합니다. 이 경우에 로컬의 다운스케일된 URI가 필요합니다. 다운스케일된 URI를 갖고오지 못하면 로컬의 원본이미지 uri를 가져옵니다. 이마저도 실패하면 네트워크에 올라가 있는 uri를 갖고 옵니다. 로컬에 이미 갖고 있는 이미지를 다시 다운로드하는 것은  창피한 일이죠.</p>

<p>이미지 파이프라인은 보통 메모리 캐시에 있는 이미지를 먼저 찾습니다. 그 다음이 디스크 캐시, 마지막이 네트워크나 다른 소스에서 찾습니다. 각각의 이미지에 대해 이 짓을 하는 것보다 우리가 메모리 캐시에 있는 <em>모든 이미지</em>의 파이프라인을 검사해볼 수 있습니다. 아무것도 찾지 못하면 외부요청이 만들어 집니다.</p>

<p>이미지를 요청하는 배열을 만들어 보고 빌더에 값을 전달해 봅시다.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Uri</span> <span class="n">uri1</span><span class="o">,</span> <span class="n">uri2</span><span class="o">;</span>
<span class="n">ImageRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="n">ImageRequest</span><span class="o">.</span><span class="na">fromUri</span><span class="o">(</span><span class="n">uri1</span><span class="o">);</span>
<span class="n">ImageRequest</span> <span class="n">request2</span> <span class="o">=</span> <span class="n">ImageRequest</span><span class="o">.</span><span class="na">fromUri</span><span class="o">(</span><span class="n">uri2</span><span class="o">);</span>
<span class="n">ImageRequest</span><span class="o">[]</span> <span class="n">requests</span> <span class="o">=</span> <span class="o">{</span> <span class="n">request1</span><span class="o">,</span> <span class="n">request2</span> <span class="o">};</span>

<span class="n">DraweeController</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">Fresco</span><span class="o">.</span><span class="na">newDraweeControllerBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setFirstAvailableImageRequests</span><span class="o">(</span><span class="n">requests</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setOldController</span><span class="o">(</span><span class="n">mSimpleDraweeView</span><span class="o">.</span><span class="na">getController</span><span class="o">())</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">mSimpleDraweeView</span><span class="o">.</span><span class="na">setController</span><span class="o">(</span><span class="n">controller</span><span class="o">);</span>
</code></pre></div>
<p>단지 한개의 요청만 화면에 표시됩니다. 메모리나 디스크, 네트워크 계층 어디서든 처음으로 발견된 것만 돌려주게 됩니다. 파이프라인은 배열의 요청 순서를 선호하는 순서로 가정합니다.</p>

<h3>커스텀 <code>DataSource</code>와 <code>Supplier</code> 지정하기</h3>

<p>Drawee 컨트롤러를 빌딩하면서 커스텀 <code>DataSource</code>와 <code>Supplier</code>를 유연하게 지정 가능합니다. 당신만의 공급자나 이미 존재하는 것을 당신이 선호하는 방식으로 작성할 수도 있습니다. <code>FirstAvailableDataSourceSupplier</code> 와 <code>IncreasingQualityDataSourceSupplier</code> 에서 구현 예제를 보세요. <code>AbstractDraweeControllerBuilder</code> 에서 이 공급자들이 어떻게 함께 작성되는지 볼 수 있습니다.</p>


    <div class="docs-prevnext">
      
        <a href="/docs/animations.html#_">&larr; Prev</a>
      
      
        <a class="right" href="/docs/listening-download-events.html#_">Next &rarr;</a>
      
    </div>

    <a id="_"></a>
</article>

</div></section>
<footer><div class='width'>
    &copy; Copyright 2015, Facebook Inc.<br>
    Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. Sample code licensed under the <a href="/sample-license.html">sample license</a>.
</div></footer>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-39814281-9', 'auto');
  ga('send', 'pageview');

</script>
<script src="/static/linkify.js"></script>
</body>
</html>

